---
title: 新手使用树莓派的总结
date: 2022-04-19 21:10:32
tags: 树莓派
---

## 一、安装系统

1. 准备工具：一张大于8GB的SD卡、读卡器、树莓派一个、HDMI线（可无）、type-c充电线、支持 HDMI 输入的显示器（可无）、键盘鼠标（可无）。
2. 首先，需要先从官方下载页面[下载Kali Linux镜像](https://www.kali.org/get-kali/)。在下载页面上找到ARM版本的镜像（img）进行下载到本地并进行解压，看实际情况选择32位还是64位。下载和解压时的路径尽量不要有中文，以免出现未知的错误。
3. 为了将Kali Linux镜像写入SD卡，利用一款名为[“win 32 disk imager”](https://sourceforge.net/projects/win32diskimager/)的软件进行系统的写入。但是在这之前，最好先使用[“SD Formatter”](https://www.sdcard.org/downloads/formatter/)将SD卡进行格式化。进入win32 disk imager之后选择下载的镜像，点击写入即可。这个过程可能需要一些时间，因为它在写入镜像后会验证SD卡。

<img src="https://cdn.staticaly.com/gh/thornboo/blog-image-bed@master/java-web-creation/clipboard.5kzg2vvlwjw0.webp" width="400" height="400">

1. 系统写入完成后，分有无显示器两种情况。
   1. 无显示器情况下：
   配置SSH：
   在boot目录下新建空文件ssh，注意没有任何后缀。
   配置无线网络：
   在boot目录下新建文件wpa_supplicant.conf, 内容如下：
   ```
    country=CN
    ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
    update_config=1

    network={
    ssid="名称，使用英语，保留引号"
    psk="密码，保留引号"
    priority=1    #优先级
    }
   ```
   1. 有显示器情况下：
   直接将树莓派连接上显示器，然后进行联网，最后使用ifconfig即可知道ip。然后就可以使用SSH连接树莓派进行操作了。

2. kali系统使用时的默认用户名为：kali， 密码也为：kali。

## 二、更换软件源

1. 只要编辑/etc/apt/sources.list 文件：
```
sudo nano /etc/apt/sources.list
```

2. 删除原文件所有内容，用以下内容取代：
```
deb http://mirror.sysu.edu.cn/raspbian/raspbian/jessiemain contrib non-free
deb-src http://mirror.sysu.edu.cn/raspbian/raspbian/jessiemain contrib non-free
```

## 三、系统更新安装包问题

1. 成功进入系统后，首先联网升级一下软件包，使用下面两个命令：
```
sudo apt update
sudo apt upgrade
```

2. 其中可能出现的升级问题：
   对apt软件包进行更新时报错：You don't have enough free space in /var/cache/apt/archives/.这是说明磁盘内存不够用了，可以使用软连接到其他内存大一点的目录下进行安装：
   1. 首先清除原有的apt配置文件：
   ```
   sudo rm -rf /var/cache/apt/archives
   ```
   2. 然后在内存大的目录下创建新的文件夹：
   ```
   sudo mkdir /dev/debs/partial
   ```
   3. 然后进行软连接：
   ```
   sudo ln -s "/dev/debs/partial" /var/cache/apt/archives
   ```
   4. 注意：不删除原有配置文件的话，会导致同样的报错。

## 四、安装中文输入法

1. 中文字库安装完成之后，还需要安装一个中文输入法。输入如下命令：
```
apt-get -y install ttf-wqy-zenhei
```

2. 继续安装相关包：
```
apt-get -y install scim-pinyin
```

3. 安装完毕后输入：
```
raspi-config
```

4. 然后选择Internationalisation options，然后选择change_locale，在Default locale for the system environment:中选择zh_CN.UTF-8,配置完成之后，输入命令：
```
reboot
```

5. 命令之后重启即可显示中文。

## 五、使用时的注意事项

1. 树莓派的电流大小一般稳定在：3.0A可以正常工作。 但是如果连接键盘和鼠标等外设的话，则需要计算一下电流电压再选择合适的电源适配器，以确保树莓派能够正常工作。
2. 使用sd卡安装系统过后，有的分区内存基本上所剩无几，使用：df -h查看各个分区磁盘使用情况，尽量将所有操作软连接到磁盘较大的分区下进行操作。
3. 禁止将树莓派的引脚短路，特别是VCC和GND，短路会造成芯片烧毁无法恢复。
4. SD卡烧录系统完成时，系统会提示格式化，此时不需要格式化，点击取消即可。 若点了格式化后树莓派会提示缺失文件，需要重新烧录系统。
